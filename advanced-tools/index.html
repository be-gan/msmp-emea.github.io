
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Comprehensive documentation for package msmp.emea">
      
      
        <meta name="author" content="Annalect EMEA">
      
      
      
        <link rel="prev" href="../hd-mmm/">
      
      
        <link rel="next" href="../function-help/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>Advanced Tools - msmp.emea Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#advanced-tools" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="msmp.emea Documentation" class="md-header__button md-logo" aria-label="msmp.emea Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            msmp.emea Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Advanced Tools
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="msmp.emea Documentation" class="md-nav__button md-logo" aria-label="msmp.emea Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    msmp.emea Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../project-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project Setup
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../modeling-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modeling Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../mmm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MMM Workflow
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../hd-mmm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HD MMM Workflow
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Advanced Tools
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Advanced Tools
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#feature-engineering-with-ga" class="md-nav__link">
    <span class="md-ellipsis">
      Feature Engineering with GA
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Feature Engineering with GA">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#function-description" class="md-nav__link">
    <span class="md-ellipsis">
      Function description
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Function description">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-row" class="md-nav__link">
    <span class="md-ellipsis">
      Example Row
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tips-reminders" class="md-nav__link">
    <span class="md-ellipsis">
      Tips &amp; Reminders
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unnesting-models" class="md-nav__link">
    <span class="md-ellipsis">
      Unnesting Models
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Unnesting Models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#purpose-and-when-to-use" class="md-nav__link">
    <span class="md-ellipsis">
      Purpose and When to Use
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../function-help/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Function Specific Help
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../training/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Training Materials
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="advanced-tools">Advanced Tools<a class="headerlink" href="#advanced-tools" title="Permanent link">&para;</a></h1>
<p>The features described in this section go beyond the core <code>msmp.emea</code> workflow. </p>
<p>While they are not required for the standard analysis pipeline, they are designed to support analysts who need greater flexibility or advanced functionality when processing and modeling data. </p>
<p>These tools aim to streamline common tasks, handle edge cases, and provide more control over specific steps in the modeling process, ultimately making the overall workflow more adaptable to different analytical needs.</p>
<h2 id="feature-engineering-with-ga">Feature Engineering with GA<a class="headerlink" href="#feature-engineering-with-ga" title="Permanent link">&para;</a></h2>
<p>The <code>msmp.emea</code> package includes a function called <code>new_ga()</code> that runs a genetic algorithm (GA) to <strong>find the best parameter values</strong> for a model simulation. It works by testing many different combinations of parameters and selecting those that lead to better simulation results, based on a score defined by the user. </p>
<p>The goal is to <strong>maximize</strong> this score, so the function keeps improving the parameter sets over several generations. It automatically filters out poor or invalid solutions, applies any constraints set by the user, and ensures that only simulations meeting minimum performance standards are considered. </p>
<p>This makes the function a <strong>useful tool for tuning models when the best settings are not known in advance</strong>.</p>
<p><img alt="new_ga workflow" src="../images/new_ga_workflow.svg" /></p>
<h4 id="function-description">Function description<a class="headerlink" href="#function-description" title="Permanent link">&para;</a></h4>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Initialisation</label><label for="__tabbed_1_2">Inputs</label><label for="__tabbed_1_3">Outputs</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>The first time you run <code>new_ga</code>, it automatically creates a new Excel file in your project folder at <strong>"07_ga_search_constraints/_ga_all_inputs.xlsx"</strong>. This file includes three sheets that define the full set of constraints the genetic algorithm will use to search for the optimal solution to your modeling problem.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:3"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Test_Variables</label><label for="__tabbed_2_2">Scoring_Criteria</label><label for="__tabbed_2_3">Selection_Rules</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>The Test_Variables sheet controls how each raw variable from Variable.csv is used by the Genetic Algorithm (GA). Each row represents a single original variable and specifies:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Column</th>
<th style="text-align: left;">Populate From / Allowed Values</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>Orig_Variable</strong></td>
<td style="text-align: left;">The exact variable name as it appears in <code>Variable.csv</code>.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Variable_Group</strong></td>
<td style="text-align: left;">Use the grouping column from <code>Variable.csv</code> to assign this variable to one of your pre-defined selection-rule groups.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Include</strong></td>
<td style="text-align: left;">Controls GA inclusion:</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;">- <code>1</code> = force include</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;">- <code>0</code> = force exclude</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;">- <code>test</code> = let GA decide include vs. exclude</td>
</tr>
<tr>
<td style="text-align: left;"><strong>VaryBy</strong></td>
<td style="text-align: left;">Coefficient variation across panels:</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;">- <code>None</code> = one coefficient for all panels</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;">- <code>&lt;panel_column_name&gt;</code> = separate coefficients by panel</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;">- <code>test</code> = GA chooses best approach</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Transform</strong></td>
<td style="text-align: left;">Whether to apply a transformation:</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;">- <code>Y</code> = use the <code>TransformType</code> defined in <code>Variable.csv</code></td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;">- <code>test</code> = GA will try different transformations</td>
</tr>
<tr>
<td style="text-align: left;"><strong>TransformType</strong></td>
<td style="text-align: left;">One of: <code>lag</code>, <code>log</code>, <code>ma</code>, <code>adstockv3</code>, <code>abc</code>, <code>abcnew</code>, <code>adr</code>.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Lag</strong></td>
<td style="text-align: left;">Two integers separated by <code>;</code> (e.g. <code>1;4</code> for lags 1–4).</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Scale</strong></td>
<td style="text-align: left;"><em>(Optional)</em> reserved for future use—leave blank unless your process documentation specifies otherwise.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Effective</strong></td>
<td style="text-align: left;">Two integers separated by <code>;</code> defining the “effective window” length.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Recency</strong></td>
<td style="text-align: left;">Two integers separated by <code>;</code> for the recency parameter.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Decay</strong></td>
<td style="text-align: left;">Two decimals between 0 and 1 separated by <code>;</code> (e.g. <code>0.1;0.5</code>).</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Period</strong></td>
<td style="text-align: left;">Two integers separated by <code>;</code> for periodicity tuning.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Window</strong></td>
<td style="text-align: left;">Two integers separated by <code>;</code> for the adstock or moving-average window.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Length</strong></td>
<td style="text-align: left;">Two integers separated by <code>;</code> for adstock length.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Peak</strong></td>
<td style="text-align: left;">Two integers separated by <code>;</code> for the ABC/ADR peak parameter.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>A</strong></td>
<td style="text-align: left;">Constant A for ABC/ADR—always set to <code>1</code>.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>B</strong></td>
<td style="text-align: left;">Three integers separated by <code>;</code>, pre-populated using the IQR of the raw variable (e.g. <code>10;50;100</code>).</td>
</tr>
<tr>
<td style="text-align: left;"><strong>C</strong></td>
<td style="text-align: left;">Two values between –5 and 0 separated by <code>;</code>, pre-populated with <code>-2;-0.5</code>.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Source</strong></td>
<td style="text-align: left;">Populated from <code>Variable.csv</code> (e.g. <code>internal_db</code>, <code>third_party</code>).</td>
</tr>
<tr>
<td style="text-align: left;"><strong>TimeUnit</strong></td>
<td style="text-align: left;">From <code>Variable.csv</code> (e.g. <code>week</code>, <code>month</code>).</td>
</tr>
<tr>
<td style="text-align: left;"><strong>data_structure</strong></td>
<td style="text-align: left;">From <code>Variable.csv</code> (e.g. <code>time-series</code>, <code>cross-sectional</code>).</td>
</tr>
<tr>
<td style="text-align: left;"><strong>exp_perc_contribution</strong></td>
<td style="text-align: left;">Two numbers between –1 and 1 separated by <code>;</code> (–100% to +100%). Pre-populated with <code>-1;1</code> to allow full range.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>refresh_priors</strong></td>
<td style="text-align: left;">- <code>Y</code> = recompute new priors at the midpoint of <code>exp_perc_contribution</code></td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;">- <code>N</code> = use priors already defined in <code>Variable.csv</code> or your custom-priors file</td>
</tr>
</tbody>
</table>
<h6 id="example-row"><strong>Example Row</strong><a class="headerlink" href="#example-row" title="Permanent link">&para;</a></h6>
<table>
<thead>
<tr>
<th style="text-align: left;">Orig_Variable</th>
<th style="text-align: left;">Variable_Group</th>
<th style="text-align: left;">Include</th>
<th style="text-align: left;">VaryBy</th>
<th style="text-align: left;">Transform</th>
<th style="text-align: left;">TransformType</th>
<th style="text-align: left;">Lag</th>
<th style="text-align: left;">Scale</th>
<th style="text-align: left;">Effective</th>
<th style="text-align: left;">Recency</th>
<th style="text-align: left;">Decay</th>
<th style="text-align: left;">Period</th>
<th style="text-align: left;">Window</th>
<th style="text-align: left;">Length</th>
<th style="text-align: left;">Peak</th>
<th style="text-align: center;">A</th>
<th style="text-align: left;">B</th>
<th style="text-align: left;">C</th>
<th style="text-align: left;">Source</th>
<th style="text-align: left;">TimeUnit</th>
<th style="text-align: left;">data_structure</th>
<th style="text-align: left;">exp_perc_contribution</th>
<th style="text-align: left;">refresh_priors</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">TV_Spend</td>
<td style="text-align: left;">Media</td>
<td style="text-align: left;">test</td>
<td style="text-align: left;">None</td>
<td style="text-align: left;">Y</td>
<td style="text-align: left;">lag</td>
<td style="text-align: left;">1;4</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">1;8</td>
<td style="text-align: left;">0;5</td>
<td style="text-align: left;">0.1;0.5</td>
<td style="text-align: left;">1;3</td>
<td style="text-align: left;">1;4</td>
<td style="text-align: left;">1;4</td>
<td style="text-align: left;">2;6</td>
<td style="text-align: center;">1</td>
<td style="text-align: left;">10;50;100</td>
<td style="text-align: left;">-2;-0.5</td>
<td style="text-align: left;">Variable.csv</td>
<td style="text-align: left;">week</td>
<td style="text-align: left;">time-series</td>
<td style="text-align: left;">-1;1</td>
<td style="text-align: left;">Y</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>The Scoring_Criteria sheet controls how each simulation is evaluated. By setting weights through the importance column, you can guide the GA to prioritize one or multiple performance metrics, adapting the optimization to your analysis goals. </p>
<p>This makes it easy to tailor the scoring logic to different project needs—whether you want to maximize model fit, enforce business constraints, or balance multiple objectives simultaneously.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Field</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
<th style="text-align: left;">Example</th>
<th style="text-align: left;">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>metric</strong></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">The name of the metric.</td>
<td style="text-align: left;"><code>"R2"</code></td>
<td style="text-align: left;">Not editable</td>
</tr>
<tr>
<td style="text-align: left;"><strong>metric_type</strong></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">A human-readable category or description of the metric.</td>
<td style="text-align: left;"><code>"Model fit quality (adjusted R2)"</code></td>
<td style="text-align: left;">Not editable</td>
</tr>
<tr>
<td style="text-align: left;"><strong>panel</strong></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">Identifier for the panel or segment this metric belongs to.</td>
<td style="text-align: left;"><code>"region_1"</code></td>
<td style="text-align: left;">Not editable</td>
</tr>
<tr>
<td style="text-align: left;"><strong>threshold_min</strong></td>
<td style="text-align: left;">float</td>
<td style="text-align: left;">The lower bound of the “acceptable” range for the metric.</td>
<td style="text-align: left;"><code>0.9</code></td>
<td style="text-align: left;">Nullable; min ≤ max</td>
</tr>
<tr>
<td style="text-align: left;"><strong>threshold_max</strong></td>
<td style="text-align: left;">float</td>
<td style="text-align: left;">The upper bound of the “acceptable” range for the metric.</td>
<td style="text-align: left;"><code>1</code></td>
<td style="text-align: left;">Nullable; ≥ min</td>
</tr>
<tr>
<td style="text-align: left;"><strong>importance_raw</strong></td>
<td style="text-align: left;">number</td>
<td style="text-align: left;">Raw importance score (unitless).</td>
<td style="text-align: left;"><code>5</code></td>
<td style="text-align: left;">≥ 0</td>
</tr>
<tr>
<td style="text-align: left;"><strong>importance_pct</strong></td>
<td style="text-align: left;">float</td>
<td style="text-align: left;">Importance as a percentage of the total (0–1).</td>
<td style="text-align: left;"><code>0.1667</code></td>
<td style="text-align: left;">Calculation; not editable</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>The Selection_Rules sheet is optional and helps filter out simulations that don't meet specific criteria. </p>
<p>For instance, if you're testing five price variables but want the final model to include only one of them, you can use this sheet to define minimum and maximum limits for how many variables from the same group can be included. This ensures the algorithm respects structural or business constraints during optimization.</p>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<p>To use this function, the user must provide:</p>
<ul>
<li>Basic numeric settings for the genetic algorithm (e.g., population size, generations, seed).</li>
<li>Logical flags to control simulation filtering and behavior.</li>
<li>Optional numeric thresholds for contribution filtering and performance.</li>
</ul>
</div>
<div class="tabbed-block">
<p>The function returns a list containing several elements that summarize the results of the genetic algorithm optimization.</p>
<p>The <code>sim_summary</code> is a data frame that provides an overview of all simulations along with their corresponding scores, allowing users to compare overall performance. </p>
<p>The <code>sim_specs</code> element is a list detailing the specific parameter configurations used in each simulation. </p>
<p>For a deeper evaluation, <code>sim_scores</code> contains a data frame with more granular scoring information for each run. </p>
<p>The output also includes <code>sim_priors</code>, which lists any prior constraints applied during the optimization, and <code>original_constraints</code>, a data frame capturing the initial set of modeling constraints. </p>
<p>Finally, the <code>seed</code> value used during the run is returned to ensure reproducibility.</p>
</div>
</div>
</div>
<h5 id="tips-reminders"><strong>Tips &amp; Reminders</strong><a class="headerlink" href="#tips-reminders" title="Permanent link">&para;</a></h5>
<ul>
<li><strong>Semicolon (<code>;</code>)</strong> is the universal separator for all ranges.</li>
<li><strong>Scale</strong> is blank by default—only populate if your workflow explicitly requires it.</li>
<li>Verify that every <code>TransformType</code> you use is implemented in your GA engine.</li>
<li>Double-check your <code>Variable_Group</code> names against the <code>Selection_Rules</code> tab to avoid typos.</li>
<li>Use this spec as your master document; apply your corporate styles (fonts, numbering, branding) as needed.</li>
</ul>
<h2 id="unnesting-models">Unnesting Models<a class="headerlink" href="#unnesting-models" title="Permanent link">&para;</a></h2>
<p>Unnesting refers to breaking down complex models into simpler, more manageable parts. This is useful when analyzing submodels or when you want to examine the components of a hierarchical structure.</p>
<h4 id="purpose-and-when-to-use">Purpose and When to Use<a class="headerlink" href="#purpose-and-when-to-use" title="Permanent link">&para;</a></h4>
<p>Unnesting is helpful when you need to isolate the effects of individual components in a nested model.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["toc.integrate", "content.code.copy"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.50899def.min.js"></script>
      
    
  </body>
</html>